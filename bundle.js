(()=>{async function c(e){if(e.length==0)throw"No blobs received.";return e.length==1?e[0]:new Blob(e,{type:e[0].type})}async function a(e){let n=[];e.captureStream=e.captureStream||e.mozCaptureStream;let r=new MediaRecorder(e.captureStream());return e.onended=t=>r.stop(),e.onpause=t=>r.pause(),e.onplay=t=>r.state=="inactive"&&r.start()||r.resume(),r.ondataavailable=t=>n.push(t.data),r.onstart=()=>n.length=0,r.onwarning=t=>console.warn(t),new Promise((t,p)=>{r.onerror=o=>p(o),r.onstop=o=>t(n)})}async function u(e,n=!0){n&&(e.currentTime=0),e.loop=!1,e.muted=!1;let r=a(e);return e.play(),r.then(c).then(URL.createObjectURL)}window.record=u;})();
